{% extends "base.html" %}
{% block title %}Anmeldung – SeniorInnen IT‑Kurs{% endblock %}
{% block content %}
  <h1>Anmeldung</h1>
  <p>Bitte fülle das Formular aus. Du erhältst danach eine Bestätigung per E‑Mail.</p>

  <form method="post" action="/anmeldung">
    {{ form.hidden_tag() }}

    <div>
      <label for="{{ form.first_name.id }}">Vorname*</label>
      {{ form.first_name(class="form-control", id=form.first_name.id) }}
    </div>

    <div>
      <label for="{{ form.last_name.id }}">Nachname*</label>
      {{ form.last_name(class="form-control", id=form.last_name.id) }}
    </div>

    <div>
      <label for="{{ form.course_id.id }}">Bitte Kurs auswählen*</label>
      <select id="{{ form.course_id.id }}" name="{{ form.course_id.name }}" class="form-select" required>
        <option value="" disabled selected>Bitte wählen…</option>
        {% for value, label in form.course_id.choices %}
          <option value="{{ value }}" {% if form.course_id.data == value %}selected{% endif %}>{{ label }}</option>
        {% endfor %}
      </select>
    </div>
    {% if show_no_email_hint %}
      <p class="form-hint">
      Du kannst Dich über dieses Formular hier nur anmelden, wenn du eine E-Mail-Adresse besitzt.
      Falls Du keine eigene E-Mail-Adresse hast, kannst Du Dich telefonisch anmelden unter:<br>
      <strong>{{ phone }}</strong>.
    </p>
    {% endif %}
    <div>
      <label for="{{ form.email.id }}">E‑Mail</label>
      {{ form.email(class="form-control", id=form.email.id) }}
    </div>

    <div>
      <label for="{{ form.phone.id }}">Telefon</label>
      {{ form.phone(class="form-control", id=form.phone.id) }}
    </div>

    {% if info %}
      <div class="alert alert-info" style="margin-top:1rem;">{{ info }}</div>
    {% endif %}

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ category }}" style="margin-top:1rem;">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <div class="actions" style="margin-top:1rem;">
      <button type="submit" class="anmelde-button">Anmelden</button>
    </div>
  </form>
{% endblock %}
